var button = $("#<%= dom_id(Company.find_by_hk_ticker(params[:hk_ticker])) %>");

button.toggleClass("btn-primary");
button.toggleClass("btn-success");
button.text("Following");
button.attr("href", "/<%= params[:hk_ticker] %>/unfollow");

var row = button.closest("tr").html();
$("#company-subscriptions > tbody").prepend("<tr>"+row+"</tr>");
$("#company-subscriptions > tbody > tr:first td:last a").attr("id", "<%= dom_id(Company.find_by_hk_ticker(params[:hk_ticker])) %>-current");
$("#company-subscriptions > tbody > tr:first td:last a").text("Unfollow");
$("#company-subscriptions > tbody > tr:first td:last a").toggleClass("btn-success");
$("#company-subscriptions > tbody > tr:first td:last a").toggleClass("btn-danger");